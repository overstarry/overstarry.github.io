<!doctype html><html lang=zh dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>如何收集系统宕机后的内存转储信息 | Overstarry Site</title><meta name=keywords content="os,ubuntu,阿里云,Crash"><meta name=description content='前言
最近出现了多次因为各种原因导致的操作系统宕机的问题，为了查找系统宕机的原因，需要收集系统宕机后的内存转储信息。本文就介绍几种常见的方式。
阿里云内置命令收集
由于主要使用的是阿里云的服务器，就先介绍阿里云收集系统宕机内存转储信息的方式。
阿里云系统默认没有开启 dump 配置，我们需要使用以下命令开启：acs-plugin-manager --exec --plugin=ecs_dump_collector --params="--enable"


那我们如何收集内存转储信息呢，执行以下命令：acs-plugin-manager --exec --plugin=ecs_dump_collector --params="-c" 出现以下信息表示收集成功。




有了转储信息文件我们就可以将文件交给专业的运维人员或阿里云工程师进行宕机原因分析。
使用 Crash + Kdump
如果我们没有使用阿里云的服务该如何收集系统崩溃的转储信息呢，我们可以使用 Crash + Kdump 进行收集，通过前面的使用可以看出阿里云的插件就是使用了这两个工具，接下来开始进行简单的介绍。
安装
需要先安装 Crash + Kdump，使用此命令进行安装：
$ sudo apt install linux-crashdump
$ sudo apt install crash
安装完为了使服务生效需要重启服务器。
使用以下命令：sudo cat /etc/default/grub.d/kdump-tools.cfg




可以看出系统保留了 192M RAM 内存区供转储捕获内核使用
收集
为了测试方便我们可以使用此命令快速触发崩溃：sudo echo c > /proc/sysrq-trigger 。命令执行后在 /var/crash 目录会生成以当前时间为名称的目录，目录里面就是收集到的转储信息。


demsg.x 为崩溃时候的系统内核日志，dump.x 文件则为转储的内核快照文件。为了更好的查找问题，我们还需要安装 vmlinux，使用以下命令安装：'><meta name=author content="overstarry"><link rel=canonical href=https://jasminides.com/posts/%E5%A6%82%E4%BD%95%E6%94%B6%E9%9B%86%E7%B3%BB%E7%BB%9F%E5%AE%95%E6%9C%BA%E5%90%8E%E7%9A%84%E5%86%85%E5%AD%98%E8%BD%AC%E5%82%A8%E4%BF%A1%E6%81%AF/><meta name=google-site-verification content="gfdsdx"><meta name=yandex-verification content="XYZabc"><meta name=msvalidate.01 content="XYZabc"><link crossorigin=anonymous href=https://jasminides.com/assets/css/stylesheet.css rel="preload stylesheet" as=style><link rel=icon href=https://jasminides.com/img/favicon/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://jasminides.com/img/favicon/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://jasminides.com/img/favicon/favicon-32x32.png><link rel=apple-touch-icon href=https://jasminides.com/img/favicon/apple-touch-icon.png><link rel=mask-icon href=https://jasminides.com/%3Clink%20/%20abs%20url%3E><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=zh href=https://jasminides.com/posts/%E5%A6%82%E4%BD%95%E6%94%B6%E9%9B%86%E7%B3%BB%E7%BB%9F%E5%AE%95%E6%9C%BA%E5%90%8E%E7%9A%84%E5%86%85%E5%AD%98%E8%BD%AC%E5%82%A8%E4%BF%A1%E6%81%AF/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script async src="https://www.googletagmanager.com/gtag/js?id=G-G40XG2SPQN"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-G40XG2SPQN")}</script><meta property="og:url" content="https://jasminides.com/posts/%E5%A6%82%E4%BD%95%E6%94%B6%E9%9B%86%E7%B3%BB%E7%BB%9F%E5%AE%95%E6%9C%BA%E5%90%8E%E7%9A%84%E5%86%85%E5%AD%98%E8%BD%AC%E5%82%A8%E4%BF%A1%E6%81%AF/"><meta property="og:site_name" content="Overstarry Site"><meta property="og:title" content="如何收集系统宕机后的内存转储信息"><meta property="og:description" content='前言 最近出现了多次因为各种原因导致的操作系统宕机的问题，为了查找系统宕机的原因，需要收集系统宕机后的内存转储信息。本文就介绍几种常见的方式。
阿里云内置命令收集 由于主要使用的是阿里云的服务器，就先介绍阿里云收集系统宕机内存转储信息的方式。
阿里云系统默认没有开启 dump 配置，我们需要使用以下命令开启：acs-plugin-manager --exec --plugin=ecs_dump_collector --params="--enable"
那我们如何收集内存转储信息呢，执行以下命令：acs-plugin-manager --exec --plugin=ecs_dump_collector --params="-c" 出现以下信息表示收集成功。
有了转储信息文件我们就可以将文件交给专业的运维人员或阿里云工程师进行宕机原因分析。
使用 Crash + Kdump 如果我们没有使用阿里云的服务该如何收集系统崩溃的转储信息呢，我们可以使用 Crash + Kdump 进行收集，通过前面的使用可以看出阿里云的插件就是使用了这两个工具，接下来开始进行简单的介绍。
安装 需要先安装 Crash + Kdump，使用此命令进行安装：
$ sudo apt install linux-crashdump $ sudo apt install crash 安装完为了使服务生效需要重启服务器。
使用以下命令：sudo cat /etc/default/grub.d/kdump-tools.cfg
可以看出系统保留了 192M RAM 内存区供转储捕获内核使用
收集 为了测试方便我们可以使用此命令快速触发崩溃：sudo echo c > /proc/sysrq-trigger 。命令执行后在 /var/crash 目录会生成以当前时间为名称的目录，目录里面就是收集到的转储信息。
demsg.x 为崩溃时候的系统内核日志，dump.x 文件则为转储的内核快照文件。为了更好的查找问题，我们还需要安装 vmlinux，使用以下命令安装：'><meta property="og:locale" content="zh"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2024-01-06T14:46:21+08:00"><meta property="article:modified_time" content="2024-01-06T14:46:21+08:00"><meta property="article:tag" content="Os"><meta property="article:tag" content="Ubuntu"><meta property="article:tag" content="阿里云"><meta property="article:tag" content="Crash"><meta property="og:image" content="https://jasminides.com/img/generics1-fs8.png"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://jasminides.com/img/generics1-fs8.png"><meta name=twitter:title content="如何收集系统宕机后的内存转储信息"><meta name=twitter:description content='前言
最近出现了多次因为各种原因导致的操作系统宕机的问题，为了查找系统宕机的原因，需要收集系统宕机后的内存转储信息。本文就介绍几种常见的方式。
阿里云内置命令收集
由于主要使用的是阿里云的服务器，就先介绍阿里云收集系统宕机内存转储信息的方式。
阿里云系统默认没有开启 dump 配置，我们需要使用以下命令开启：acs-plugin-manager --exec --plugin=ecs_dump_collector --params="--enable"


那我们如何收集内存转储信息呢，执行以下命令：acs-plugin-manager --exec --plugin=ecs_dump_collector --params="-c" 出现以下信息表示收集成功。




有了转储信息文件我们就可以将文件交给专业的运维人员或阿里云工程师进行宕机原因分析。
使用 Crash + Kdump
如果我们没有使用阿里云的服务该如何收集系统崩溃的转储信息呢，我们可以使用 Crash + Kdump 进行收集，通过前面的使用可以看出阿里云的插件就是使用了这两个工具，接下来开始进行简单的介绍。
安装
需要先安装 Crash + Kdump，使用此命令进行安装：
$ sudo apt install linux-crashdump
$ sudo apt install crash
安装完为了使服务生效需要重启服务器。
使用以下命令：sudo cat /etc/default/grub.d/kdump-tools.cfg




可以看出系统保留了 192M RAM 内存区供转储捕获内核使用
收集
为了测试方便我们可以使用此命令快速触发崩溃：sudo echo c > /proc/sysrq-trigger 。命令执行后在 /var/crash 目录会生成以当前时间为名称的目录，目录里面就是收集到的转储信息。


demsg.x 为崩溃时候的系统内核日志，dump.x 文件则为转储的内核快照文件。为了更好的查找问题，我们还需要安装 vmlinux，使用以下命令安装：'><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://jasminides.com/posts/"},{"@type":"ListItem","position":2,"name":"如何收集系统宕机后的内存转储信息","item":"https://jasminides.com/posts/%E5%A6%82%E4%BD%95%E6%94%B6%E9%9B%86%E7%B3%BB%E7%BB%9F%E5%AE%95%E6%9C%BA%E5%90%8E%E7%9A%84%E5%86%85%E5%AD%98%E8%BD%AC%E5%82%A8%E4%BF%A1%E6%81%AF/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"如何收集系统宕机后的内存转储信息","name":"如何收集系统宕机后的内存转储信息","description":"前言 最近出现了多次因为各种原因导致的操作系统宕机的问题，为了查找系统宕机的原因，需要收集系统宕机后的内存转储信息。本文就介绍几种常见的方式。\n阿里云内置命令收集 由于主要使用的是阿里云的服务器，就先介绍阿里云收集系统宕机内存转储信息的方式。\n阿里云系统默认没有开启 dump 配置，我们需要使用以下命令开启：acs-plugin-manager --exec --plugin=ecs_dump_collector --params=\u0026quot;--enable\u0026quot;\n那我们如何收集内存转储信息呢，执行以下命令：acs-plugin-manager --exec --plugin=ecs_dump_collector --params=\u0026quot;-c\u0026quot; 出现以下信息表示收集成功。\n有了转储信息文件我们就可以将文件交给专业的运维人员或阿里云工程师进行宕机原因分析。\n使用 Crash + Kdump 如果我们没有使用阿里云的服务该如何收集系统崩溃的转储信息呢，我们可以使用 Crash + Kdump 进行收集，通过前面的使用可以看出阿里云的插件就是使用了这两个工具，接下来开始进行简单的介绍。\n安装 需要先安装 Crash + Kdump，使用此命令进行安装：\n$ sudo apt install linux-crashdump $ sudo apt install crash 安装完为了使服务生效需要重启服务器。\n使用以下命令：sudo cat /etc/default/grub.d/kdump-tools.cfg\n可以看出系统保留了 192M RAM 内存区供转储捕获内核使用\n收集 为了测试方便我们可以使用此命令快速触发崩溃：sudo echo c \u0026gt; /proc/sysrq-trigger 。命令执行后在 /var/crash 目录会生成以当前时间为名称的目录，目录里面就是收集到的转储信息。\ndemsg.x 为崩溃时候的系统内核日志，dump.x 文件则为转储的内核快照文件。为了更好的查找问题，我们还需要安装 vmlinux，使用以下命令安装：\n","keywords":["os","ubuntu","阿里云","Crash"],"articleBody":"前言 最近出现了多次因为各种原因导致的操作系统宕机的问题，为了查找系统宕机的原因，需要收集系统宕机后的内存转储信息。本文就介绍几种常见的方式。\n阿里云内置命令收集 由于主要使用的是阿里云的服务器，就先介绍阿里云收集系统宕机内存转储信息的方式。\n阿里云系统默认没有开启 dump 配置，我们需要使用以下命令开启：acs-plugin-manager --exec --plugin=ecs_dump_collector --params=\"--enable\"\n那我们如何收集内存转储信息呢，执行以下命令：acs-plugin-manager --exec --plugin=ecs_dump_collector --params=\"-c\" 出现以下信息表示收集成功。\n有了转储信息文件我们就可以将文件交给专业的运维人员或阿里云工程师进行宕机原因分析。\n使用 Crash + Kdump 如果我们没有使用阿里云的服务该如何收集系统崩溃的转储信息呢，我们可以使用 Crash + Kdump 进行收集，通过前面的使用可以看出阿里云的插件就是使用了这两个工具，接下来开始进行简单的介绍。\n安装 需要先安装 Crash + Kdump，使用此命令进行安装：\n$ sudo apt install linux-crashdump $ sudo apt install crash 安装完为了使服务生效需要重启服务器。\n使用以下命令：sudo cat /etc/default/grub.d/kdump-tools.cfg\n可以看出系统保留了 192M RAM 内存区供转储捕获内核使用\n收集 为了测试方便我们可以使用此命令快速触发崩溃：sudo echo c \u003e /proc/sysrq-trigger 。命令执行后在 /var/crash 目录会生成以当前时间为名称的目录，目录里面就是收集到的转储信息。\ndemsg.x 为崩溃时候的系统内核日志，dump.x 文件则为转储的内核快照文件。为了更好的查找问题，我们还需要安装 vmlinux，使用以下命令安装：\necho \"deb http://ddebs.ubuntu.com $(lsb_release -cs) main restricted universe multiverse deb http://ddebs.ubuntu.com $(lsb_release -cs)-updates main restricted universe multiverse deb http://ddebs.ubuntu.com $(lsb_release -cs)-proposed main restricted universe multiverse\" | sudo tee -a /etc/apt/sources.list.d/ddebs.list sudo apt install ubuntu-dbgsym-keyring sudo apt-get update sudo apt -y install linux-image-$(uname -r)-dbgsym 安装完我们就可以对刚刚收集到的转储文件进行分析了，使用命令：\nsudo crash /usr/lib/debug/boot/vmlinux-5.4.0-166-generic /var/crash/202401061626/dump.202401061626 输出：\ncrash 7.2.8 Copyright (C) 2002-2020 Red Hat, Inc. Copyright (C) 2004, 2005, 2006, 2010 IBM Corporation Copyright (C) 1999-2006 Hewlett-Packard Co Copyright (C) 2005, 2006, 2011, 2012 Fujitsu Limited Copyright (C) 2006, 2007 VA Linux Systems Japan K.K. Copyright (C) 2005, 2011 NEC Corporation Copyright (C) 1999, 2002, 2007 Silicon Graphics, Inc. Copyright (C) 1999, 2000, 2001, 2002 Mission Critical Linux, Inc. This program is free software, covered by the GNU General Public License, and you are welcome to change it and/or distribute copies of it under certain conditions. Enter \"help copying\" to see the conditions. This program has absolutely no warranty. Enter \"help warranty\" for details. GNU gdb (GDB) 7.6 Copyright (C) 2013 Free Software Foundation, Inc. License GPLv3+: GNU GPL version 3 or later This is free software: you are free to change and redistribute it. There is NO WARRANTY, to the extent permitted by law. Type \"show copying\" and \"show warranty\" for details. This GDB was configured as \"x86_64-unknown-linux-gnu\"... WARNING: kernel relocated [300MB]: patching 115314 gdb minimal_symbol values KERNEL: /usr/lib/debug/boot/vmlinux-5.4.0-166-generic DUMPFILE: /var/crash/202401061626/dump.202401061626 [PARTIAL DUMP] CPUS: 2 DATE: Sat Jan 6 16:26:23 2024 UPTIME: 00:06:35 LOAD AVERAGE: 0.00, 0.02, 0.02 TASKS: 148 NODENAME: iZ7xv1a0t15muqy1e2co1uZ RELEASE: 5.4.0-166-generic VERSION: #183-Ubuntu SMP Mon Oct 2 11:28:33 UTC 2023 MACHINE: x86_64 (2699 Mhz) MEMORY: 3.9 GB PANIC: \"Kernel panic - not syncing: sysrq triggered crash\" PID: 3654 COMMAND: \"echo\" TASK: ffff8c4a696d8000 [THREAD_INFO: ffff8c4a696d8000] CPU: 0 STATE: TASK_RUNNING (PANIC) 使用 bt 命令查看崩溃时的调用栈：\ncrash\u003e bt PID: 3654 TASK: ffff8c4a696d8000 CPU: 0 COMMAND: \"echo\" #0 [ffffabde00513c68] machine_kexec at ffffffff93c6d063 #1 [ffffabde00513cc8] __crash_kexec at ffffffff93d4de32 #2 [ffffabde00513d98] panic at ffffffff946a69a8 #3 [ffffabde00513e18] sysrq_handle_crash at ffffffff94288205 #4 [ffffabde00513e28] __handle_sysrq.cold at ffffffff946ce885 #5 [ffffabde00513e60] write_sysrq_trigger at ffffffff94288a38 #6 [ffffabde00513e78] proc_reg_write at ffffffff93f69113 #7 [ffffabde00513e98] __vfs_write at ffffffff93ed1b6b #8 [ffffabde00513ea8] vfs_write at ffffffff93ed2879 #9 [ffffabde00513ee0] ksys_write at ffffffff93ed4e07 #10 [ffffabde00513f20] __x64_sys_write at ffffffff93ed4e9a #11 [ffffabde00513f30] do_syscall_64 at ffffffff93c04fe7 #12 [ffffabde00513f50] entry_SYSCALL_64_after_hwframe at ffffffff948000a4 RIP: 00007ff833b41077 RSP: 00007ffeadb56b78 RFLAGS: 00000246 RAX: ffffffffffffffda RBX: 0000000000000002 RCX: 00007ff833b41077 RDX: 0000000000000002 RSI: 000055b3e2648440 RDI: 0000000000000001 RBP: 000055b3e2648440 R8: 0000000000000000 R9: 0000000000000001 R10: 00007ff833c1c640 R11: 0000000000000246 R12: 0000000000000002 R13: 00007ff833c206a0 R14: 00007ff833c1c4a0 R15: 00007ff833c1b8a0 ORIG_RAX: 0000000000000001 CS: 0033 SS: 002b crash 还有很多用法，感兴趣的读者可以自行研究学习。\n参考 https://help.aliyun.com/zh/ecs/user-guide/collect-kdump-information-after-an-instance-experiences-an-operating-system-failure?spm=5176.smartservice_service_robot_chat_new.0.0.aedc3f1bqtn8Zi https://crash-utility.github.io/crash_whitepaper.html#WHY_CRASH ","wordCount":"472","inLanguage":"zh","image":"https://jasminides.com/img/generics1-fs8.png","datePublished":"2024-01-06T14:46:21+08:00","dateModified":"2024-01-06T14:46:21+08:00","author":{"@type":"Person","name":"overstarry"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://jasminides.com/posts/%E5%A6%82%E4%BD%95%E6%94%B6%E9%9B%86%E7%B3%BB%E7%BB%9F%E5%AE%95%E6%9C%BA%E5%90%8E%E7%9A%84%E5%86%85%E5%AD%98%E8%BD%AC%E5%82%A8%E4%BF%A1%E6%81%AF/"},"publisher":{"@type":"Organization","name":"Overstarry Site","logo":{"@type":"ImageObject","url":"https://jasminides.com/img/favicon/favicon.ico"}}}</script><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2240998016636586" crossorigin=anonymous></script><link rel=manifest href=https://jasminides.com/site.webmanifest></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://jasminides.com/ accesskey=h title="Home (Alt + H)">Home</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://jasminides.com/archives/ title=archives><span>archives</span></a></li><li><a href=https://jasminides.com/tags/ title=tags><span>tags</span></a></li><li><a href=https://jasminides.com/search/ title="search (Alt + /)" accesskey=/><span>search</span></a></li><li><a href=https://jasminides.com/index.xml title=rss><span>rss</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://jasminides.com/>主页</a>&nbsp;»&nbsp;<a href=https://jasminides.com/posts/>Posts</a></div><h1 class="post-title entry-hint-parent">如何收集系统宕机后的内存转储信息</h1><div class=post-meta><span title='2024-01-06 14:46:21 +0800 +0800'>一月 6, 2024</span>&nbsp;·&nbsp;3 分钟&nbsp;·&nbsp;overstarry&nbsp;|&nbsp;<a href=https://github.com/overstarry/blogs/blob/master/content/posts/%e5%a6%82%e4%bd%95%e6%94%b6%e9%9b%86%e7%b3%bb%e7%bb%9f%e5%ae%95%e6%9c%ba%e5%90%8e%e7%9a%84%e5%86%85%e5%ad%98%e8%bd%ac%e5%82%a8%e4%bf%a1%e6%81%af.md rel="noopener noreferrer edit" target=_blank>Suggest Changes</a></div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>目录</span></summary><div class=inner><ul><li><a href=#%e5%89%8d%e8%a8%80 aria-label=前言>前言</a></li><li><a href=#%e9%98%bf%e9%87%8c%e4%ba%91%e5%86%85%e7%bd%ae%e5%91%bd%e4%bb%a4%e6%94%b6%e9%9b%86 aria-label=阿里云内置命令收集>阿里云内置命令收集</a></li><li><a href=#%e4%bd%bf%e7%94%a8-crash--kdump aria-label="使用 Crash + Kdump">使用 Crash + Kdump</a><ul><li><a href=#%e5%ae%89%e8%a3%85 aria-label=安装>安装</a></li><li><a href=#%e6%94%b6%e9%9b%86 aria-label=收集>收集</a></li></ul></li><li><a href=#%e5%8f%82%e8%80%83 aria-label=参考>参考</a></li></ul></div></details></div><div class=post-content><h2 id=前言>前言<a hidden class=anchor aria-hidden=true href=#前言>#</a></h2><p>最近出现了多次因为各种原因导致的操作系统宕机的问题，为了查找系统宕机的原因，需要收集系统宕机后的内存转储信息。本文就介绍几种常见的方式。</p><h2 id=阿里云内置命令收集>阿里云内置命令收集<a hidden class=anchor aria-hidden=true href=#阿里云内置命令收集>#</a></h2><p>由于主要使用的是阿里云的服务器，就先介绍阿里云收集系统宕机内存转储信息的方式。</p><p>阿里云系统默认没有开启 dump 配置，我们需要使用以下命令开启：<code>acs-plugin-manager --exec --plugin=ecs_dump_collector --params="--enable"</code></p><p><img loading=lazy src=https://jasminides.com/img/crash/img.png alt=img.png></p><p>那我们如何收集内存转储信息呢，执行以下命令：<code>acs-plugin-manager --exec --plugin=ecs_dump_collector --params="-c"</code> 出现以下信息表示收集成功。</p><p><img loading=lazy src=https://jasminides.com/img/crash/img_1.png alt=img_1.png></p><p><img loading=lazy src=https://jasminides.com/img/crash/img_2.png alt=img_2.png></p><p>有了转储信息文件我们就可以将文件交给专业的运维人员或阿里云工程师进行宕机原因分析。</p><h2 id=使用-crash--kdump>使用 Crash + Kdump<a hidden class=anchor aria-hidden=true href=#使用-crash--kdump>#</a></h2><p>如果我们没有使用阿里云的服务该如何收集系统崩溃的转储信息呢，我们可以使用 Crash + Kdump 进行收集，通过前面的使用可以看出阿里云的插件就是使用了这两个工具，接下来开始进行简单的介绍。</p><h3 id=安装>安装<a hidden class=anchor aria-hidden=true href=#安装>#</a></h3><p>需要先安装 Crash + Kdump，使用此命令进行安装：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ sudo apt install linux-crashdump
</span></span><span style=display:flex><span>$ sudo apt install crash
</span></span></code></pre></div><p>安装完为了使服务生效需要重启服务器。</p><p>使用以下命令：<code>sudo cat /etc/default/grub.d/kdump-tools.cfg</code></p><p><img loading=lazy src=https://jasminides.com/img/crash/img_3.png alt=img_3.png>
<img loading=lazy src=https://jasminides.com/img/crash/img_4.png alt=img_4.png></p><p>可以看出系统保留了 192M RAM 内存区供转储捕获内核使用</p><h3 id=收集>收集<a hidden class=anchor aria-hidden=true href=#收集>#</a></h3><p>为了测试方便我们可以使用此命令快速触发崩溃：<code>sudo echo c > /proc/sysrq-trigger</code> 。命令执行后在 /var/crash 目录会生成以当前时间为名称的目录，目录里面就是收集到的转储信息。</p><p><img loading=lazy src=https://jasminides.com/img/crash/img_5.png alt=img_5.png></p><p>demsg.x 为崩溃时候的系统内核日志，dump.x 文件则为转储的内核快照文件。为了更好的查找问题，我们还需要安装 vmlinux，使用以下命令安装：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>echo <span style=color:#e6db74>&#34;deb http://ddebs.ubuntu.com </span><span style=color:#66d9ef>$(</span>lsb_release -cs<span style=color:#66d9ef>)</span><span style=color:#e6db74> main restricted universe multiverse
</span></span></span><span style=display:flex><span><span style=color:#e6db74> deb http://ddebs.ubuntu.com </span><span style=color:#66d9ef>$(</span>lsb_release -cs<span style=color:#66d9ef>)</span><span style=color:#e6db74>-updates main restricted universe multiverse
</span></span></span><span style=display:flex><span><span style=color:#e6db74> deb http://ddebs.ubuntu.com </span><span style=color:#66d9ef>$(</span>lsb_release -cs<span style=color:#66d9ef>)</span><span style=color:#e6db74>-proposed main restricted universe multiverse&#34;</span> | sudo tee -a /etc/apt/sources.list.d/ddebs.list
</span></span><span style=display:flex><span> sudo apt install ubuntu-dbgsym-keyring
</span></span><span style=display:flex><span>sudo apt-get update
</span></span><span style=display:flex><span>sudo apt -y install linux-image-<span style=color:#66d9ef>$(</span>uname -r<span style=color:#66d9ef>)</span>-dbgsym
</span></span></code></pre></div><p>安装完我们就可以对刚刚收集到的转储文件进行分析了，使用命令：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>sudo crash /usr/lib/debug/boot/vmlinux-5.4.0-166-generic /var/crash/202401061626/dump.202401061626 
</span></span></code></pre></div><p>输出：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-console data-lang=console><span style=display:flex><span>crash 7.2.8
</span></span><span style=display:flex><span>Copyright (C) 2002-2020  Red Hat, Inc.
</span></span><span style=display:flex><span>Copyright (C) 2004, 2005, 2006, 2010  IBM Corporation
</span></span><span style=display:flex><span>Copyright (C) 1999-2006  Hewlett-Packard Co
</span></span><span style=display:flex><span>Copyright (C) 2005, 2006, 2011, 2012  Fujitsu Limited
</span></span><span style=display:flex><span>Copyright (C) 2006, 2007  VA Linux Systems Japan K.K.
</span></span><span style=display:flex><span>Copyright (C) 2005, 2011  NEC Corporation
</span></span><span style=display:flex><span>Copyright (C) 1999, 2002, 2007  Silicon Graphics, Inc.
</span></span><span style=display:flex><span>Copyright (C) 1999, 2000, 2001, 2002  Mission Critical Linux, Inc.
</span></span><span style=display:flex><span>This program is free software, covered by the GNU General Public License,
</span></span><span style=display:flex><span>and you are welcome to change it and/or distribute copies of it under
</span></span><span style=display:flex><span>certain conditions.  Enter &#34;help copying&#34; to see the conditions.
</span></span><span style=display:flex><span>This program has absolutely no warranty.  Enter &#34;help warranty&#34; for details.
</span></span><span style=display:flex><span> 
</span></span><span style=display:flex><span>GNU gdb (GDB) 7.6
</span></span><span style=display:flex><span>Copyright (C) 2013 Free Software Foundation, Inc.
</span></span><span style=display:flex><span>License GPLv3+: GNU GPL version 3 or later &lt;http://gnu.org/licenses/gpl.html&gt;
</span></span><span style=display:flex><span>This is free software: you are free to change and redistribute it.
</span></span><span style=display:flex><span>There is NO WARRANTY, to the extent permitted by law.  Type &#34;show copying&#34;
</span></span><span style=display:flex><span>and &#34;show warranty&#34; for details.
</span></span><span style=display:flex><span>This GDB was configured as &#34;x86_64-unknown-linux-gnu&#34;...
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span>WARNING: kernel relocated [300MB]: patching 115314 gdb minimal_symbol values
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>
</span></span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010></span>      KERNEL: /usr/lib/debug/boot/vmlinux-5.4.0-166-generic            
</span></span><span style=display:flex><span>    DUMPFILE: /var/crash/202401061626/dump.202401061626  [PARTIAL DUMP]
</span></span><span style=display:flex><span>        CPUS: 2
</span></span><span style=display:flex><span>        DATE: Sat Jan  6 16:26:23 2024
</span></span><span style=display:flex><span>      UPTIME: 00:06:35
</span></span><span style=display:flex><span>LOAD AVERAGE: 0.00, 0.02, 0.02
</span></span><span style=display:flex><span>       TASKS: 148
</span></span><span style=display:flex><span>    NODENAME: iZ7xv1a0t15muqy1e2co1uZ
</span></span><span style=display:flex><span>     RELEASE: 5.4.0-166-generic
</span></span><span style=display:flex><span>     VERSION: #183-Ubuntu SMP Mon Oct 2 11:28:33 UTC 2023
</span></span><span style=display:flex><span>     MACHINE: x86_64  (2699 Mhz)
</span></span><span style=display:flex><span>      MEMORY: 3.9 GB
</span></span><span style=display:flex><span>       PANIC: &#34;Kernel panic - not syncing: sysrq triggered crash&#34;
</span></span><span style=display:flex><span>         PID: 3654
</span></span><span style=display:flex><span>     COMMAND: &#34;echo&#34;
</span></span><span style=display:flex><span>        TASK: ffff8c4a696d8000  [THREAD_INFO: ffff8c4a696d8000]
</span></span><span style=display:flex><span>         CPU: 0
</span></span><span style=display:flex><span>       STATE: TASK_RUNNING (PANIC)
</span></span></code></pre></div><p>使用 bt 命令查看崩溃时的调用栈：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-console data-lang=console><span style=display:flex><span>crash&gt; bt
</span></span><span style=display:flex><span>PID: 3654   TASK: ffff8c4a696d8000  CPU: 0   COMMAND: &#34;echo&#34;
</span></span><span style=display:flex><span> #0 [ffffabde00513c68] machine_kexec at ffffffff93c6d063
</span></span><span style=display:flex><span> #1 [ffffabde00513cc8] __crash_kexec at ffffffff93d4de32
</span></span><span style=display:flex><span> #2 [ffffabde00513d98] panic at ffffffff946a69a8
</span></span><span style=display:flex><span> #3 [ffffabde00513e18] sysrq_handle_crash at ffffffff94288205
</span></span><span style=display:flex><span> #4 [ffffabde00513e28] __handle_sysrq.cold at ffffffff946ce885
</span></span><span style=display:flex><span> #5 [ffffabde00513e60] write_sysrq_trigger at ffffffff94288a38
</span></span><span style=display:flex><span> #6 [ffffabde00513e78] proc_reg_write at ffffffff93f69113
</span></span><span style=display:flex><span> #7 [ffffabde00513e98] __vfs_write at ffffffff93ed1b6b
</span></span><span style=display:flex><span> #8 [ffffabde00513ea8] vfs_write at ffffffff93ed2879
</span></span><span style=display:flex><span> #9 [ffffabde00513ee0] ksys_write at ffffffff93ed4e07
</span></span><span style=display:flex><span>#<span style=color:#ae81ff>10</span> <span style=color:#f92672>[</span>ffffabde00513f20<span style=color:#f92672>]</span> __x64_sys_write at ffffffff93ed4e9a
</span></span><span style=display:flex><span>#<span style=color:#ae81ff>11</span> <span style=color:#f92672>[</span>ffffabde00513f30<span style=color:#f92672>]</span> do_syscall_64 at ffffffff93c04fe7
</span></span><span style=display:flex><span>#<span style=color:#ae81ff>12</span> <span style=color:#f92672>[</span>ffffabde00513f50<span style=color:#f92672>]</span> entry_SYSCALL_64_after_hwframe at ffffffff948000a4
</span></span><span style=display:flex><span>    RIP: 00007ff833b41077  RSP: 00007ffeadb56b78  RFLAGS: 00000246
</span></span><span style=display:flex><span>    RAX: ffffffffffffffda  RBX: 0000000000000002  RCX: 00007ff833b41077
</span></span><span style=display:flex><span>    RDX: 0000000000000002  RSI: 000055b3e2648440  RDI: 0000000000000001
</span></span><span style=display:flex><span>    RBP: 000055b3e2648440   R8: 0000000000000000   R9: 0000000000000001
</span></span><span style=display:flex><span>    R10: 00007ff833c1c640  R11: 0000000000000246  R12: 0000000000000002
</span></span><span style=display:flex><span>    R13: 00007ff833c206a0  R14: 00007ff833c1c4a0  R15: 00007ff833c1b8a0
</span></span><span style=display:flex><span>    ORIG_RAX: 0000000000000001  CS: 0033  SS: 002b
</span></span></code></pre></div><p>crash 还有很多用法，感兴趣的读者可以自行研究学习。</p><h2 id=参考>参考<a hidden class=anchor aria-hidden=true href=#参考>#</a></h2><ul><li><a href="https://help.aliyun.com/zh/ecs/user-guide/collect-kdump-information-after-an-instance-experiences-an-operating-system-failure?spm=5176.smartservice_service_robot_chat_new.0.0.aedc3f1bqtn8Zi">https://help.aliyun.com/zh/ecs/user-guide/collect-kdump-information-after-an-instance-experiences-an-operating-system-failure?spm=5176.smartservice_service_robot_chat_new.0.0.aedc3f1bqtn8Zi</a></li><li><a href=https://crash-utility.github.io/crash_whitepaper.html#WHY_CRASH>https://crash-utility.github.io/crash_whitepaper.html#WHY_CRASH</a></li></ul></div><div style="margin:20px 0;text-align:center"><script async data-cfasync=false src=//pl27931025.effectivegatecpm.com/d409609f1c5a341d33b0b182998434a1/invoke.js></script><div id=container-d409609f1c5a341d33b0b182998434a1></div></div><footer class=post-footer><ul class=post-tags><li><a href=https://jasminides.com/tags/os/>Os</a></li><li><a href=https://jasminides.com/tags/ubuntu/>Ubuntu</a></li><li><a href=https://jasminides.com/tags/%E9%98%BF%E9%87%8C%E4%BA%91/>阿里云</a></li><li><a href=https://jasminides.com/tags/crash/>Crash</a></li></ul><nav class=paginav><a class=prev href=https://jasminides.com/posts/apisix-%E5%BC%80%E5%90%AF-gzip/><span class=title>« 上一页</span><br><span>Apisix 开启 gzip</span>
</a><a class=next href=https://jasminides.com/posts/go-%E6%B1%89%E5%AD%97%E8%BD%AC%E6%8B%BC%E9%9F%B3-go-pinyin/><span class=title>下一页 »</span><br><span>go 汉字转拼音 go-pinyin</span></a></nav><ul class=share-buttons><li><a target=_blank rel="noopener noreferrer" aria-label="share 如何收集系统宕机后的内存转储信息 on x" href="https://x.com/intent/tweet/?text=%e5%a6%82%e4%bd%95%e6%94%b6%e9%9b%86%e7%b3%bb%e7%bb%9f%e5%ae%95%e6%9c%ba%e5%90%8e%e7%9a%84%e5%86%85%e5%ad%98%e8%bd%ac%e5%82%a8%e4%bf%a1%e6%81%af&amp;url=https%3a%2f%2fjasminides.com%2fposts%2f%25E5%25A6%2582%25E4%25BD%2595%25E6%2594%25B6%25E9%259B%2586%25E7%25B3%25BB%25E7%25BB%259F%25E5%25AE%2595%25E6%259C%25BA%25E5%2590%258E%25E7%259A%2584%25E5%2586%2585%25E5%25AD%2598%25E8%25BD%25AC%25E5%2582%25A8%25E4%25BF%25A1%25E6%2581%25AF%2f&amp;hashtags=os%2cubuntu%2c%e9%98%bf%e9%87%8c%e4%ba%91%2cCrash"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentColor"><path d="M512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446C483.971.0 512 28.03 512 62.554zM269.951 190.75 182.567 75.216H56L207.216 272.95 63.9 436.783h61.366L235.9 310.383l96.667 126.4H456L298.367 228.367l134-153.151H371.033zM127.633 110h36.468l219.38 290.065H349.5z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share 如何收集系统宕机后的内存转储信息 on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fjasminides.com%2fposts%2f%25E5%25A6%2582%25E4%25BD%2595%25E6%2594%25B6%25E9%259B%2586%25E7%25B3%25BB%25E7%25BB%259F%25E5%25AE%2595%25E6%259C%25BA%25E5%2590%258E%25E7%259A%2584%25E5%2586%2585%25E5%25AD%2598%25E8%25BD%25AC%25E5%2582%25A8%25E4%25BF%25A1%25E6%2581%25AF%2f&amp;title=%e5%a6%82%e4%bd%95%e6%94%b6%e9%9b%86%e7%b3%bb%e7%bb%9f%e5%ae%95%e6%9c%ba%e5%90%8e%e7%9a%84%e5%86%85%e5%ad%98%e8%bd%ac%e5%82%a8%e4%bf%a1%e6%81%af&amp;summary=%e5%a6%82%e4%bd%95%e6%94%b6%e9%9b%86%e7%b3%bb%e7%bb%9f%e5%ae%95%e6%9c%ba%e5%90%8e%e7%9a%84%e5%86%85%e5%ad%98%e8%bd%ac%e5%82%a8%e4%bf%a1%e6%81%af&amp;source=https%3a%2f%2fjasminides.com%2fposts%2f%25E5%25A6%2582%25E4%25BD%2595%25E6%2594%25B6%25E9%259B%2586%25E7%25B3%25BB%25E7%25BB%259F%25E5%25AE%2595%25E6%259C%25BA%25E5%2590%258E%25E7%259A%2584%25E5%2586%2585%25E5%25AD%2598%25E8%25BD%25AC%25E5%2582%25A8%25E4%25BF%25A1%25E6%2581%25AF%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentColor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share 如何收集系统宕机后的内存转储信息 on reddit" href="https://reddit.com/submit?url=https%3a%2f%2fjasminides.com%2fposts%2f%25E5%25A6%2582%25E4%25BD%2595%25E6%2594%25B6%25E9%259B%2586%25E7%25B3%25BB%25E7%25BB%259F%25E5%25AE%2595%25E6%259C%25BA%25E5%2590%258E%25E7%259A%2584%25E5%2586%2585%25E5%25AD%2598%25E8%25BD%25AC%25E5%2582%25A8%25E4%25BF%25A1%25E6%2581%25AF%2f&title=%e5%a6%82%e4%bd%95%e6%94%b6%e9%9b%86%e7%b3%bb%e7%bb%9f%e5%ae%95%e6%9c%ba%e5%90%8e%e7%9a%84%e5%86%85%e5%ad%98%e8%bd%ac%e5%82%a8%e4%bf%a1%e6%81%af"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentColor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share 如何收集系统宕机后的内存转储信息 on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fjasminides.com%2fposts%2f%25E5%25A6%2582%25E4%25BD%2595%25E6%2594%25B6%25E9%259B%2586%25E7%25B3%25BB%25E7%25BB%259F%25E5%25AE%2595%25E6%259C%25BA%25E5%2590%258E%25E7%259A%2584%25E5%2586%2585%25E5%25AD%2598%25E8%25BD%25AC%25E5%2582%25A8%25E4%25BF%25A1%25E6%2581%25AF%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentColor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share 如何收集系统宕机后的内存转储信息 on whatsapp" href="https://api.whatsapp.com/send?text=%e5%a6%82%e4%bd%95%e6%94%b6%e9%9b%86%e7%b3%bb%e7%bb%9f%e5%ae%95%e6%9c%ba%e5%90%8e%e7%9a%84%e5%86%85%e5%ad%98%e8%bd%ac%e5%82%a8%e4%bf%a1%e6%81%af%20-%20https%3a%2f%2fjasminides.com%2fposts%2f%25E5%25A6%2582%25E4%25BD%2595%25E6%2594%25B6%25E9%259B%2586%25E7%25B3%25BB%25E7%25BB%259F%25E5%25AE%2595%25E6%259C%25BA%25E5%2590%258E%25E7%259A%2584%25E5%2586%2585%25E5%25AD%2598%25E8%25BD%25AC%25E5%2582%25A8%25E4%25BF%25A1%25E6%2581%25AF%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentColor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share 如何收集系统宕机后的内存转储信息 on telegram" href="https://telegram.me/share/url?text=%e5%a6%82%e4%bd%95%e6%94%b6%e9%9b%86%e7%b3%bb%e7%bb%9f%e5%ae%95%e6%9c%ba%e5%90%8e%e7%9a%84%e5%86%85%e5%ad%98%e8%bd%ac%e5%82%a8%e4%bf%a1%e6%81%af&amp;url=https%3a%2f%2fjasminides.com%2fposts%2f%25E5%25A6%2582%25E4%25BD%2595%25E6%2594%25B6%25E9%259B%2586%25E7%25B3%25BB%25E7%25BB%259F%25E5%25AE%2595%25E6%259C%25BA%25E5%2590%258E%25E7%259A%2584%25E5%2586%2585%25E5%25AD%2598%25E8%25BD%25AC%25E5%2582%25A8%25E4%25BF%25A1%25E6%2581%25AF%2f"><svg viewBox="2 2 28 28" height="30" width="30" fill="currentColor"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share 如何收集系统宕机后的内存转储信息 on ycombinator" href="https://news.ycombinator.com/submitlink?t=%e5%a6%82%e4%bd%95%e6%94%b6%e9%9b%86%e7%b3%bb%e7%bb%9f%e5%ae%95%e6%9c%ba%e5%90%8e%e7%9a%84%e5%86%85%e5%ad%98%e8%bd%ac%e5%82%a8%e4%bf%a1%e6%81%af&u=https%3a%2f%2fjasminides.com%2fposts%2f%25E5%25A6%2582%25E4%25BD%2595%25E6%2594%25B6%25E9%259B%2586%25E7%25B3%25BB%25E7%25BB%259F%25E5%25AE%2595%25E6%259C%25BA%25E5%2590%258E%25E7%259A%2584%25E5%2586%2585%25E5%25AD%2598%25E8%25BD%25AC%25E5%2582%25A8%25E4%25BF%25A1%25E6%2581%25AF%2f"><svg width="30" height="30" viewBox="0 0 512 512" fill="currentColor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446zM183.8767 87.9921h-62.034L230.6673 292.4508V424.0079h50.6655V292.4508L390.1575 87.9921H328.1233L256 238.2489z"/></svg></a></li></ul></footer><script src=https://giscus.app/client.js data-repo=overstarry/overstarry.github.io data-repo-id="MDEwOlJlcG9zaXRvcnkzODMwMDQ3ODg=" data-category-id=DIC_kwDOFtQwdM4B-Q5w data-mapping=pathname data-strict=0 data-reactions-enabled=1 data-emit-metadata=0 data-input-position=bottom data-theme=preferred_color_scheme data-lang=zh-CN crossorigin=anonymous async></script></article></main><footer class=footer><span>Copyright © 2024-now - overstarry · All rights reserved<br></span>·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="复制";function s(){t.innerHTML="已复制！",setTimeout(()=>{t.innerHTML="复制"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script><script type=text/javascript src=//pl27931222.effectivegatecpm.com/4d/7d/1b/4d7d1bf61b7acfe9e844e445ec09d596.js></script></body></html>